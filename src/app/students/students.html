   <div class="table-container">
      <h2>Student List</h2>
      
      <div *ngIf="students.length === 0" class="no-students">
        <p>No students registered yet. <a routerLink="/register">Register the first student</a></p>
      </div>

      <p-table 
        *ngIf="students.length > 0"
        [value]="students" 
        selectionMode="single"
        (onRowSelect)="editStudent($event)"
        [paginator]="students.length > 10"
        [rows]="10"
        responsiveLayout="scroll"
      >
        <ng-template pTemplate="header">
          <tr>
            <th pSortableColumn="name">
              Name 
              <p-sortIcon field="name"></p-sortIcon>
            </th>
            <th pSortableColumn="email">
              Email
              <p-sortIcon field="email"></p-sortIcon>
            </th>
            <th pSortableColumn="age">
              Age
              <p-sortIcon field="age"></p-sortIcon>
            </th>
            <th pSortableColumn="department">
              Department
              <p-sortIcon field="department"></p-sortIcon>
            </th>
            <th>Actions</th>
          </tr>
        </ng-template>
        
        <ng-template pTemplate="body" let-student let-i="rowIndex">
          <tr [pSelectableRow]="student">
            <td>{{ student.name }}</td>
            <td>{{ student.email }}</td>
            <td>{{ student.age }}</td>
            <td>{{ getDepartmentLabel(student.department) }}</td>
            <td>
              <button 
                pButton 
                type="button" 
                icon="pi pi-pencil" 
                class="p-button-text p-button-sm"
                (click)="editStudentByIndex(i)"
                pTooltip="Edit Student"
              ></button>
              <button 
                pButton 
                type="button" 
                icon="pi pi-trash" 
                class="p-button-text p-button-danger p-button-sm"
                (click)="deleteStudent(i)"
                pTooltip="Delete Student"
              ></button>
            </td>
          </tr>
        </ng-template>
        
        <ng-template pTemplate="emptymessage">
          <tr>
            <td colspan="5">No students found.</td>
          </tr>
        </ng-template>
      </p-table>

      <p-dialog 
        header="Edit Student" 
        [(visible)]="displayDialog" 
        [modal]="true" 
        [style]="{width: '450px'}"
        [closable]="true"
        (onHide)="closeDialog()"
      >
        <form [formGroup]="editForm" (ngSubmit)="saveEdit()" class="p-fluid">
          <div class="p-field">
            <label for="editName">Name *</label>
            <input 
              id="editName"
              pInputText 
              formControlName="name"
              [class.ng-invalid]="editForm.get('name')?.invalid && editForm.get('name')?.touched"
            />
            <small class="error" *ngIf="editForm.get('name')?.invalid && editForm.get('name')?.touched">
              <span *ngIf="editForm.get('name')?.errors?.['required']">Name is required</span>
              <span *ngIf="editForm.get('name')?.errors?.['minlength']">Name must be at least 3 characters</span>
            </small>
          </div>
          
          <div class="p-field">
            <label for="editEmail">Email *</label>
            <input 
              id="editEmail"
              pInputText 
              formControlName="email"
              [class.ng-invalid]="editForm.get('email')?.invalid && editForm.get('email')?.touched"
            />
            <small class="error" *ngIf="editForm.get('email')?.invalid && editForm.get('email')?.touched">
              <span *ngIf="editForm.get('email')?.errors?.['required']">Email is required</span>
              <span *ngIf="editForm.get('email')?.errors?.['email']">Please enter a valid email</span>
            </small>
          </div>
          
          <div class="p-field">
            <label for="editAge">Age *</label>
            <input 
              id="editAge"
              type="number" 
              pInputText 
              formControlName="age"
              [class.ng-invalid]="editForm.get('age')?.invalid && editForm.get('age')?.touched"
            />
            <small class="error" *ngIf="editForm.get('age')?.invalid && editForm.get('age')?.touched">
              <span *ngIf="editForm.get('age')?.errors?.['required']">Age is required</span>
              <span *ngIf="editForm.get('age')?.errors?.['min']">Age must be at least 16</span>
              <span *ngIf="editForm.get('age')?.errors?.['max']">Age cannot exceed 45</span>
            </small>
          </div>
          
          <div class="p-field">
            <label for="editDepartment">Department *</label>
            <p-dropdown 
              id="editDepartment"
              [options]="departments" 
              formControlName="department"
              placeholder="Select Department"
              optionLabel="label"
              optionValue="value"
              [class.ng-invalid]="editForm.get('department')?.invalid && editForm.get('department')?.touched"
            ></p-dropdown>
            <small class="error" *ngIf="editForm.get('department')?.invalid && editForm.get('department')?.touched">
              <span *ngIf="editForm.get('department')?.errors?.['required']">Please select a department</span>
            </small>
          </div>
        </form>
        
        <ng-template pTemplate="footer">
          <button 
            pButton 
            type="button" 
            label="Cancel" 
            icon="pi pi-times"
            class="p-button-text"
            (click)="closeDialog()"
          ></button>
          <button 
            pButton 
            type="button" 
            label="Save Changes" 
            icon="pi pi-check"
            [disabled]="editForm.invalid"
            (click)="saveEdit()"
          ></button>
        </ng-template>
      </p-dialog>
    </div>